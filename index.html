<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="t-title">å¯§å­¸æœƒäº†å—</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        :root { --p1: #4361ee; --p2: #7209b7; }
        body { font-family: 'PingFang TC', sans-serif; margin: 0; background: #f8fafc; color: #333; }
        .container { max-width: 1000px; margin: 0 auto; padding: 0 20px; }

        /* å°è¦½åˆ— */
        .navbar { background: #fff; padding: 10px 0; border-bottom: 1px solid #eee; position: sticky; top: 0; z-index: 100; }
        .nav-c { display: flex; align-items: center; justify-content: space-between; gap: 20px; }
        .logo { display: flex; align-items: center; gap: 10px; font-weight: bold; font-size: 20px; text-decoration: none; color: #333; cursor: pointer; }
        .logo img { width: 35px; height: 35px; border-radius: 5px; object-fit: cover; }
        
        /* æœå°‹æ¡† */
        .search-box { position: relative; flex: 1; max-width: 300px; }
        .search-box input { width: 100%; padding: 8px 35px 8px 15px; border: 1px solid #ddd; border-radius: 20px; outline: none; }

        /* è¼ªæ’­å€ */
        .hero-section { position: relative; height: 400px; border-radius: 15px; overflow: hidden; margin-top: 20px; background: #000; display: none; }
        .hero-slide { position: absolute; width: 100%; height: 100%; opacity: 0; transition: 0.8s; background-size: cover; background-position: center; cursor: pointer; z-index: 1; }
        .hero-slide.active { opacity: 1; z-index: 2; }
        .hero-overlay { position: absolute; bottom: 0; left: 0; width: 100%; padding: 60px 30px; background: linear-gradient(transparent, rgba(0,0,0,0.85)); color: #fff; pointer-events: none; }

        /* æ–‡ç« æ¸…å–® */
        .list-section { margin-top: 40px; padding-bottom: 60px; }
        .post-card { display: flex; background: #fff; padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #eee; cursor: pointer; transition: 0.3s; gap: 20px; align-items: center; }
        .post-card:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .post-info { flex: 1; }
        .post-info .tag { color: var(--p1); font-weight: bold; }
        .post-img { width: 180px; height: 110px; border-radius: 10px; object-fit: cover; }

        /* ğŸ“– å…§å®¹é¡¯ç¤ºå€ */
        #reader { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 2000; overflow-y: auto; padding: 40px 20px; box-sizing: border-box; }
        .reader-content { max-width: 750px; margin: 0 auto; }
        /* è®“ HTML æ¨™ç±¤æ­£ç¢ºé¡¯ç¤º */
        #full-article h2 { color: var(--p1); border-left: 4px solid var(--p1); padding-left: 10px; }
        #full-article a { color: var(--p1); text-decoration: underline; }

        /* é å°¾ */
        footer { background: #1e293b; color: #fff; padding: 50px 0; margin-top: 50px; }
        .f-grid { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 40px; }
        .social-icons a { color: #fff; font-size: 24px; margin-right: 15px; }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="container nav-c">
            <div class="logo" onclick="location.reload()"><img id="logo-img" src=""><span id="site-name"></span></div>
            <div class="search-box"><input type="text" id="search-input" placeholder="æœå°‹..." oninput="handleSearch()"></div>
        </div>
    </nav>

    <div class="container">
        <div id="hero" class="hero-section">
            <div id="hero-wrap"></div>
        </div>
        <div class="list-section">
            <h2 id="list-title">æœ€æ–°æ–‡ç« </h2>
            <div id="post-list"></div>
        </div>
    </div>

    <div id="reader">
        <div class="reader-content">
            <button onclick="closeReader()" style="padding:10px 20px; margin-bottom:20px; cursor:pointer;">âœ• é—œé–‰</button>
            <div id="full-article"></div>
        </div>
    </div>

    <footer>
        <div class="container f-grid">
            <div><h3 id="f-site-name"></h3><p>æ­¡è¿ä¾†åˆ°æˆ‘çš„å€‹äººç¶²ç«™</p></div>
            <div><h4>åˆ†é¡</h4><div id="footer-tags"></div></div>
            <div><h4>ç¤¾ç¾¤</h4>
                <div class="social-icons">
                    <a id="f-fb" target="_blank"><i class="fa-brands fa-facebook"></i></a>
                    <a id="f-ig" target="_blank"><i class="fa-brands fa-instagram"></i></a>
                    <a id="f-yt" target="_blank"><i class="fa-brands fa-youtube"></i></a>
                    <a id="f-line" target="_blank"><i class="fa-brands fa-line"></i></a>
                </div>
            </div>
        </div>
    </footer>

<script>
    let allPosts = [];
    let heroItems = [];

    function render() {
        const name = localStorage.getItem('sn') || 'å¯§å­¸æœƒäº†å—';
        document.getElementById('site-name').innerText = name;
        document.getElementById('f-site-name').innerText = name;
        document.getElementById('logo-img').src = localStorage.getItem('sl') || '';
        document.getElementById('f-fb').href = localStorage.getItem('f_fb') || '#';
        document.getElementById('f-ig').href = localStorage.getItem('f_ig') || '#';
        document.getElementById('f-yt').href = localStorage.getItem('f_yt') || '#';
        document.getElementById('f-line').href = localStorage.getItem('f_line') || '#';

        allPosts = JSON.parse(localStorage.getItem('ps') || '[]');
        
        // æ¸²æŸ“åˆ†é¡æ¨™ç±¤
        const tags = [...new Set(allPosts.map(p => p.tag))];
        document.getElementById('footer-tags').innerHTML = tags.map(tag => `<div style="cursor:pointer; margin-bottom:5px;" onclick="filterByTag('${tag}')"># ${tag}</div>`).join('');

        // æ¸²æŸ“è¼ªæ’­
        heroItems = allPosts.filter(p => p.isHero);
        if(heroItems.length > 0) {
            document.getElementById('hero').style.display = 'block';
            document.getElementById('hero-wrap').innerHTML = heroItems.map((p, i) => `
                <div class="hero-slide ${i===0?'active':''}" style="background-image:url('${p.img}')" onclick="openPost(${allPosts.indexOf(p)})">
                    <div class="hero-overlay"><b>${p.tag}</b><h3>${p.t}</h3></div>
                </div>
            `).join('');
        }
        displayPosts(allPosts);
    }

    function displayPosts(posts) {
        document.getElementById('post-list').innerHTML = posts.map(p => `
            <div class="post-card" onclick="openPost(${allPosts.indexOf(p)})">
                <div class="post-info"><span class="tag">${p.tag}</span><h3>${p.t}</h3></div>
                <img class="post-img" src="${p.img}">
            </div>
        `).join('') || 'ç›®å‰å°šç„¡å…§å®¹';
    }

    function handleSearch() {
        const q = document.getElementById('search-input').value.toLowerCase();
        displayPosts(allPosts.filter(p => p.t.toLowerCase().includes(q) || p.tag.toLowerCase().includes(q)));
    }

    function filterByTag(tag) {
        document.getElementById('search-input').value = tag;
        handleSearch();
    }

    function openPost(idx) {
        const p = allPosts[idx];
        let media = '';
        if (p.type === 'video') {
            if (p.video.includes('youtube')) {
                const vid = p.video.split('v=')[1];
                media = `<iframe width="100%" height="400" src="https://www.youtube.com/embed/${vid}" frameborder="0"></iframe>`;
            } else {
                media = `<video src="${p.video}" controls width="100%"></video>`;
            }
        }
        document.getElementById('full-article').innerHTML = `<h1>${p.t}</h1>${media}<div style="margin-top:20px;">${p.c}</div>`;
        document.getElementById('reader').style.display = 'block';
        document.body.style.overflow = 'hidden';
    }

    function closeReader() {
        document.getElementById('reader').style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    render();
</script>
</body>
</html>